##서비스 워커 - 석우님
회사 업무 하다보니 사용하게 되어 정리하게 됨.

##서비스 워커 - 웹 어플리케이션 네트워크 사이에 프록시 서버 역활을 수행함.

###서비스 워커 특징 
출처나 리소스를 등록하는 이벤트 기반 워커
자바스크립트 파일 형태를 가지고 있음. 탐색, 리소스 가로채서 수정 및 캐싱을 도움

브라우저 내에 돔에 접근하거나 조작이 불가능함.
애플레이션과는 다른 쓰레드에서 동작함.

HTTPS에서만 동작함 (보안적인 부분으로 인하여)

##가능한 것
1. 네트워크 트래픽 통제
2. 캐싱 수행
3. 푸시 알림 관리
4. 인터넷 끊어졌을 때 백그라운드 싱크를 통해 작업 가능

##불가능한 것
1. 돔 조작
2. 80포트에서 동작 불가 (HTTPS 기반이기 때문에)
    1. 로컬호스트에선 동작한다 함. (개발 테스트로 인하여)

###서비스 워커 라이프 사이클
등록 -> 설치 -> 활성화 3단계

##패치 이벤트
네트워크 트래픽을 추적하고 관리 가능.

#￼ 싱크 이벤트
백그라운드 싱크?
 인터넷 연결 상태가 안정화 될 때 까지 작업을 미루는 api

##푸시 이벤트
푸시 메세지를 받았을 때 이벤트 핸들러로 등록 가능

https://redjen8.github.io/posts/may2023/service-worker%EC%9D%98-%EC%9D%B4%ED%95%B4/   Q: 서비스워커가 백그라운드에서 실행되는 장점은 좋습니다만,  -> 리유님단점으로는 사용자가 보이지 않는 영역에서 도니까 보안이나 프라이버시 문제가 발생할 수 있을까요? -> 서비스 워커는 기존 웹 API들의 한계를 넘어서 웹 애플리케이션이 좀 더 네이티브하게 동작할 수 있도록 도울 수 있습니다. 강력한 힘을 가지기 때문에 더 강력한 책임이 뒤 따라오게 되는데요. 아래 링크에서 서비스 워커의 보안 관련된 사전 질문들을 볼 수 있었습니다 
￼
 https://chromium.googlesource.com/chromium/src/+/main/docs/security/service-worker-security-faq.md 1. 서비스 워커는 격리된 환경에서 돌아갑니다. DOM에 접근할 수 없을 뿐만 아니라 샌드박스 환경에서 실행됩니다. 2. 서비스 워커는 영원히 동작하지도 않습니다. 최대 24시간마다 HTTP 캐시가 재검증되기도 하고, 브라우저에서 동작하는 모든 서비스 워커의 쓰레드를 언제라도 종료할 수 있습니다. (크롬의 경우 30초 이상 유휴 상태인 서비스 워커를 종료시킵니다) 3. xss 취약점이 있는 사이트의 경우 공격자가 서비스 워커를 등록하여 임의의 스크립트를 실행시킬 수 있기 때문에 (!) clear-site-data와 같은 전략들을 사용한 서비스 워커를 개발해야 한다고 합니다. (https://www.w3.org/TR/clear-site-data/)  		chrome://serviceworker-internals/  여기 방문해 보시면 현재 동작 중인 서비스 워커 목록을 볼 수 있습니다 ㅎㅎ  
서비스 워커 사용한 푸시 이벤트는 비투비로도 사용이 가능하다. 캐시도 앱을 pwa로 하여 설치할 수 있다. 캐시 사용하여 화면은 보이게 하고 인터넷 연결되지 않습니다라는 메세지를 보내는 식으로 하여 동작할 수도 있다. 

서비스 워커에서 음성인식 같은것도 가능하다. 웹 페이지에 ~~해줘 이런거 하면 응답 가능하다.
비투비에서는 아는 사람은 잘 써먹는 듯 하다.   사장님이 많이 좋아하신다. -> 현민 

————
###리팩토링 2판 챕터 1- 현민님
작성할 때는 절차형으로 많이 작성했는데 이런 부분을 똑같은 코드들이 중복되었음.
수정할 일이 생기면서 고통스러워져서 공부하게 됨.
리팩토링에서 가장 중요한 것은 테스트 코드를 마련하는 것.
결과를 조금씩 수정하고 계속 값을 확인하는 방식으로 해야한다.
나중에 다 고친 후 테스트보단 중간중간 계속 테스트하는것이 중요하다.

어떤 부분들을 작은 단위라도 수정할 수 있을지 찾는것이 중요하다.
함수 추출 방식으로 하여 리팩토링을 진행하는 형태로 책에서는 안내하고 있다.
리팩토링할때는 값을 바꾸는것을 조심히 다뤄야한다.

다뤄지는 코드 바로 위에서 변수를 선언하면 가시성에서 좋고, 소스 이해하는데도 좋음.

절차형 프로그래밍으로 하였을때는 한 변수로 값을 계속 바꾸고 했었는데 함수로 추출해내고 그 안에서 값을 다루다보니 가시성이 좋아졌음.

변수를 함수 안에 바로 적용하므로써 즉시 호출하게하여 리팩토링을 진행하는것이 좋음.
변수를 하나 없앰으로써 기억해야하는 포인트들이 줄어드는것이라고 저자는 말함.

##반복문을 쪼개는 방식
반복문 하나 할 때 그 안에서 다 처리하는 방향으로 했는데
하나하나를 쪼개서 역활마다 나눔.
나중에는 중첩 for문이 나뉘어져서 어떤 역활을 하는지가 명확하게 들어나게됨.

Q: 리팩터링 조건은 참 많은데요~ 현민님이 생각하시는... 리팩터링 시 중요하게 생각하는 철학(최우선 조건)이 있으실까요? 있으시다면 그 이유도 궁금하네요 -> 리유님
-> 리팩토링 진행시 다시 보기 좋게 해체하는 작업을 하는데 맨 처음부터 이쁘게 짜려하면 잘 안짜져서 일단 쭉 작성한 뒤에 리팩토링을 진행함.비슷한것들은 묶어서 작업하는 방식으로 진행함. 가장 중요한것은 다른사람들이 보기 편하게 하는 부분이 가장 중요한 것 같다.

Q: 1뎁스 이상 코드를 안짜려하는 편인데 가시성에서 좋은 것 같다. ->예지
-> 동의한다.